(function(){angular.module("app").directive("modalDialog",function($rootScope,$window,$templateCache,$compile,$http){return{restrict:"EA",scope:{show:"=",modalUser:"=",saveUser:"&",templateUser:"@"},replace:true,link:function(scope,element,attrs){$http.get(scope.templateUser,{cache:$templateCache}).then(function(tplContent){element.replaceWith($compile(tplContent.data)(scope))});scope.dialogStyle={};if(attrs.width){scope.dialogStyle.width=attrs.width+"%";scope.dialogStyle.left=(100-attrs.width)/2+"%"}if(attrs.height){scope.dialogStyle.height=attrs.height+"%";scope.dialogStyle.top=(100-attrs.height)/2+"%"}scope.hideModal=function(){scope.show=false};scope.clone=function(obj){if(obj===null||typeof obj!=="object"){return obj}var temp=obj.constructor();for(var key in obj){temp[key]=scope.clone(obj[key])}return temp};var tempUser=scope.clone(scope.modalUser);scope.save=function(){$rootScope.globals.modalinit=true;scope.saveUser(scope.modalUser);scope.show=false};scope.cancel=function(){scope.modalUser=scope.clone(tempUser);scope.show=false}}}})})();