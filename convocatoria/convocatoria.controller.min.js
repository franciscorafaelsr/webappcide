(function(){"use strict";angular.module("app").controller("convocatoriaController",convocatoriaController);convocatoriaController.$inject=["$location","$http","CatService","$filter","$rootScope","AuthenticationService"];function convocatoriaController($location,$http,CatService,$filter,$rootScope,AuthenticationService){var vm=this;vm.saveData=saveData;vm.login=login;(function initController(){if($rootScope.globals.convocatorias!==undefined){vm.convocatoriaoptions=$rootScope.globals.convocatorias.data}else{CatService.GetCatalogo("convocatorias").then(function(data){$rootScope.globals.convocatorias=data;vm.convocatoriaoptions=data.data}).catch(function(err){console.log(err)})}})();function login(){vm.dataLoading=true;$rootScope.globals.convocatoria=vm.convocatoriachoose.id;$rootScope.globals.data=undefined;AuthenticationService.updateSession($rootScope.globals.currentUser.idUser,$rootScope.globals.convocatoria).then(function(data){console.log("ya se tiene donde guardar");console.log(data);AuthenticationService.SetSession(data.idsesiones);$location.path("/mainform")}).catch(function(err){console.log("la instancia no existe")});vm.dataLoading=false}function saveData(){CatService.datosAcademicosSave($rootScope.globals.currentUser.idsesion,vm.entidadchoose.id,vm.selectedSchool.id,vm.sitioweb,vm.boleta,vm.semestre,vm.promedio,vm.becadohoose.id).then(function(data){console.log(data)}).catch(function(err){console.log(err)})}}})();